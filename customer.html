<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Messages | E-Book Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #a259ff;
            --primary-dark: #7c30b6;
            --primary-light: #d9c7ff;
            --secondary-color: #1abc9c;
            --secondary-light: #a6f0e1;
            --text-color: #231942;
            --text-light: #5d576b;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --gray-light: #e9ecef;
            --gray: #6c757d;
            --gray-dark: #495057;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-light: 0 2px 6px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s ease;
            --border-radius: 12px;
            --border-radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 25px 0;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 100;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            display: flex;
            align-items: center;
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .logo i {
            font-size: 28px;
            margin-right: 12px;
        }

        .logo h1 {
            font-size: 22px;
            font-weight: 700;
        }

        .nav-links {
            list-style: none;
            padding: 0 15px;
        }

        .nav-links li {
            margin-bottom: 8px;
        }

        .nav-links a {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: var(--white);
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
            font-weight: 500;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .nav-links i {
            font-size: 18px;
            margin-right: 15px;
            width: 20px;
            text-align: center;
        }

        .nav-links span {
            font-weight: 500;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .header h2 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-color);
            position: relative;
            padding-bottom: 10px;
        }

        .header h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 12px 18px;
            box-shadow: var(--shadow-light);
            width: 320px;
            transition: var(--transition);
        }

        .search-bar:focus-within {
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .search-bar input {
            border: none;
            outline: none;
            background: transparent;
            width: 100%;
            font-size: 15px;
            margin-left: 10px;
            color: var(--text-color);
        }

        .search-bar input::placeholder {
            color: var(--gray);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--white);
            padding: 10px 18px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .user-profile:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            font-size: 16px;
        }

        .user-profile h4 {
            font-size: 15px;
            font-weight: 600;
        }

        .user-profile p {
            font-size: 13px;
            color: var(--gray);
        }

        /* Stats Cards */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
        }

        .stat-card.primary::before {
            background: var(--primary-color);
        }

        .stat-card.success::before {
            background: var(--secondary-color);
        }

        .stat-card.warning::before {
            background: var(--warning);
        }

        .stat-card.info::before {
            background: var(--info);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-icon.primary {
            background: rgba(162, 89, 255, 0.15);
            color: var(--primary-color);
        }

        .stat-icon.success {
            background: rgba(26, 188, 156, 0.15);
            color: var(--secondary-color);
        }

        .stat-icon.warning {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
        }

        .stat-icon.info {
            background: rgba(23, 162, 184, 0.15);
            color: var(--info);
        }

        .stat-content h3 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-content p {
            font-size: 14px;
            color: var(--gray);
            font-weight: 500;
        }

        /* Messages Container */
        .messages-container {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .messages-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }

        .messages-header h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
        }

        .messages-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .filter-select {
            padding: 10px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            background: var(--white);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            color: var(--text-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .btn {
            padding: 12px 22px;
            border-radius: var(--border-radius-sm);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: var(--white);
            box-shadow: 0 4px 10px rgba(162, 89, 255, 0.3);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(162, 89, 255, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--secondary-color);
            color: var(--white);
            box-shadow: 0 4px 10px rgba(26, 188, 156, 0.3);
        }

        .btn-success:hover {
            background: #16a085;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(26, 188, 156, 0.4);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
            box-shadow: 0 4px 10px rgba(220, 53, 69, 0.3);
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(220, 53, 69, 0.4);
        }

        /* Messages List */
        .messages-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message-item {
            background: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            transition: var(--transition);
            border-left: 4px solid var(--primary-color);
            cursor: pointer;
        }

        .message-item.unread {
            background: rgba(162, 89, 255, 0.05);
            border-left-color: var(--secondary-color);
        }

        .message-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-light);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .message-sender {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sender-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            font-size: 14px;
        }

        .sender-info h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 3px;
        }

        .sender-info p {
            font-size: 13px;
            color: var(--gray);
        }

        .message-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .message-date {
            font-size: 13px;
            color: var(--gray);
        }

        .message-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-new {
            background: rgba(26, 188, 156, 0.15);
            color: var(--secondary-color);
        }

        .status-read {
            background: rgba(108, 117, 125, 0.15);
            color: var(--gray);
        }

        .status-replied {
            background: rgba(162, 89, 255, 0.15);
            color: var(--primary-color);
        }

        .message-preview {
            margin-bottom: 15px;
        }

        .message-preview h5 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .message-preview p {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .message-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .action-btn {
            padding: 8px 15px;
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .action-btn.reply {
            background: var(--primary-light);
            color: var(--primary-color);
        }

        .action-btn.reply:hover {
            background: var(--primary-color);
            color: var(--white);
        }

        .action-btn.delete {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }

        .action-btn.delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--white);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
            transform: translateY(-20px);
            transition: var(--transition);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid var(--gray-light);
        }

        .modal-header h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
        }

        .modal-close {
            background: transparent;
            border: none;
            font-size: 20px;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: var(--gray-light);
            color: var(--text-color);
        }

        .modal-body {
            padding: 25px;
        }

        .message-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .detail-group {
            margin-bottom: 15px;
        }

        .detail-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--gray);
            margin-bottom: 5px;
            display: block;
        }

        .detail-value {
            font-size: 15px;
            color: var(--text-color);
            font-weight: 500;
        }

        .message-full {
            margin-top: 20px;
        }

        .message-full .detail-label {
            margin-bottom: 10px;
        }

        .message-full .detail-value {
            background: var(--light-bg);
            padding: 15px;
            border-radius: var(--border-radius-sm);
            line-height: 1.6;
        }

        .modal-footer {
            padding: 20px 25px;
            border-top: 1px solid var(--gray-light);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--gray-light);
        }

        .empty-state h4 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--gray);
        }

        .empty-state p {
            font-size: 14px;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius-sm);
            padding: 12px;
            font-size: 18px;
            cursor: pointer;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .mobile-menu-toggle:hover {
            background: var(--primary-dark);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 16px 20px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 350px;
            transform: translateX(400px);
            opacity: 0;
            transition: transform 0.4s ease, opacity 0.4s ease;
            border-left: 4px solid var(--success);
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(40, 167, 69, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--success);
            font-size: 18px;
        }

        .toast.warning .toast-icon {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
            border-left-color: var(--warning);
        }

        .toast-content h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .toast-content p {
            font-size: 14px;
            color: var(--gray);
        }

        .toast-close {
            background: transparent;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 16px;
            margin-left: auto;
            transition: var(--transition);
        }

        .toast-close:hover {
            color: var(--text-color);
        }

        /* Responsive Design */
        @media (max-width: 1100px) {
            .dashboard-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 15px 0;
                display: none;
                height: auto;
                position: relative;
            }
            
            .sidebar.active {
                display: block;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .nav-links {
                display: flex;
                overflow-x: auto;
                padding: 0 10px;
            }
            
            .nav-links li {
                margin-bottom: 0;
                flex-shrink: 0;
            }
            
            .nav-links a {
                padding: 10px 15px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .search-bar {
                width: 100%;
            }
            
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .messages-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .message-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .message-meta {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                width: 100%;
            }
            
            .message-details {
                grid-template-columns: 1fr;
            }
            
            .toast-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }

            .toast {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 20px 15px;
            }
            
            .message-actions {
                flex-direction: column;
            }
            
            .action-btn {
                justify-content: center;
            }
            
            .modal-footer {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="logo">
            <i class="fas fa-book"></i>
            <h1>E-Book Store</h1>
        </div>
        <ul class="nav-links">
            <li><a href="dashboard.html"><i class="fas fa-home"></i> <span>Dashboard</span></a></li>
            <li><a href="orders.html"><i class="fas fa-shopping-cart"></i> <span>Orders</span></a></li>
            <li><a href="products.html"><i class="fas fa-book"></i> <span>Products</span></a></li>
            <li><a href="customer.html" class="active"><i class="fas fa-users"></i> <span>Customers</span></a></li>
            <li><a href="setting.html"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <h2>Customer Messages</h2>
            <div class="user-info">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search messages...">
                </div>
                <div class="user-profile">
                    <div class="avatar">JS</div>
                    <div>
                        <h4>John Smith</h4>
                        <p>Store Manager</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-cards">
            <div class="stat-card primary">
                <div class="stat-icon primary">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="stat-content">
                    <h3>42</h3>
                    <p>Total Messages</p>
                </div>
            </div>
            <div class="stat-card success">
                <div class="stat-icon success">
                    <i class="fas fa-envelope-open"></i>
                </div>
                <div class="stat-content">
                    <h3>28</h3>
                    <p>Read Messages</p>
                </div>
            </div>
            <div class="stat-card warning">
                <div class="stat-icon warning">
                    <i class="fas fa-reply"></i>
                </div>
                <div class="stat-content">
                    <h3>15</h3>
                    <p>Replied Messages</p>
                </div>
            </div>
            <div class="stat-card info">
                <div class="stat-icon info">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-content">
                    <h3>14</h3>
                    <p>Unread Messages</p>
                </div>
            </div>
        </div>

        <!-- Messages Container -->
        <div class="messages-container">
            <div class="messages-header">
                <h3>Contact Us Messages</h3>
                <div class="messages-controls">
                    <select class="filter-select" id="statusFilter">
                        <option value="all">All Messages</option>
                        <option value="new">New</option>
                        <option value="read">Read</option>
                        <option value="replied">Replied</option>
                    </select>
                    <button class="btn btn-primary" id="markAllRead">
                        <i class="fas fa-check-double"></i> Mark All as Read
                    </button>
                </div>
            </div>
            
            <div class="messages-list" id="messagesList">
                <!-- Messages will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Message Detail Modal -->
    <div class="modal-overlay" id="messageModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Message Details</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Message details will be dynamically added here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="replyBtn">
                    <i class="fas fa-reply"></i> Reply
                </button>
                <button class="btn btn-danger" id="deleteMessageBtn">
                    <i class="fas fa-trash"></i> Delete Message
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Sample contact messages data
        const sampleMessages = [
            {
                id: 1,
                name: "Sarah Johnson",
                email: "sarah.j@example.com",
                phone: "+1 (555) 123-4567",
                subject: "Issue with ebook download",
                message: "I purchased 'Digital Fortress' yesterday but I'm unable to download it to my device. The download starts but then fails after a few seconds. Can you help me resolve this issue? I've tried on both my laptop and phone with the same result. This is quite frustrating as I was looking forward to reading this book during my flight tomorrow.",
                date: "2023-10-15T14:30:00",
                status: "new",
                unread: true
            },
            {
                id: 2,
                name: "Michael Chen",
                email: "michael.chen@example.com",
                phone: "+1 (555) 987-6543",
                subject: "Subscription inquiry",
                message: "I'm interested in your premium subscription but I have some questions about the features. Can you provide more details about the audiobook access and family sharing options? Also, is there a student discount available? I'm a graduate student and would love to use your service if it fits my budget.",
                date: "2023-10-14T09:15:00",
                status: "read",
                unread: false
            },
            {
                id: 3,
                name: "Emma Rodriguez",
                email: "emma.rdz@example.com",
                phone: "+1 (555) 456-7890",
                subject: "Book recommendation",
                message: "I really enjoyed 'The Silent Patient' from your store. Do you have any similar psychological thrillers you would recommend? I prefer books with unexpected plot twists and complex characters. I've already read most of the popular ones, so I'm looking for hidden gems.",
                date: "2023-10-13T16:45:00",
                status: "replied",
                unread: false
            },
            {
                id: 4,
                name: "David Wilson",
                email: "dwilson@example.com",
                phone: "+1 (555) 234-5678",
                subject: "Payment issue",
                message: "I tried to purchase 'Atomic Habits' but my payment was declined even though my card has sufficient funds. I've tried twice with the same result. What could be the problem? The card I'm using is a Visa credit card that I've used for other online purchases without any issues. Please advise on how to proceed.",
                date: "2023-10-12T11:20:00",
                status: "new",
                unread: true
            },
            {
                id: 5,
                name: "Lisa Thompson",
                email: "lisa.t@example.com",
                phone: "+1 (555) 876-5432",
                subject: "Feature request",
                message: "I love using your ebook store, but I would really appreciate a dark mode option for reading at night. The bright white background can be straining on the eyes in low light conditions. Also, would it be possible to add a feature that remembers where I left off across devices?",
                date: "2023-10-11T18:05:00",
                status: "read",
                unread: false
            }
        ];

        // DOM elements
        const messagesList = document.getElementById('messagesList');
        const statusFilter = document.getElementById('statusFilter');
        const searchInput = document.getElementById('searchInput');
        const markAllReadBtn = document.getElementById('markAllRead');
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const sidebar = document.getElementById('sidebar');
        const toastContainer = document.getElementById('toastContainer');
        const messageModal = document.getElementById('messageModal');
        const modalClose = document.getElementById('modalClose');
        const modalBody = document.getElementById('modalBody');
        const replyBtn = document.getElementById('replyBtn');
        const deleteMessageBtn = document.getElementById('deleteMessageBtn');

        // Current selected message
        let currentMessageId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderMessages();
            setupEventListeners();
        });

        // Set up event listeners
        function setupEventListeners() {
            // Status filter
            statusFilter.addEventListener('change', function() {
                renderMessages();
            });

            // Search input
            searchInput.addEventListener('input', function() {
                renderMessages();
            });

            // Mark all as read
            markAllReadBtn.addEventListener('click', function() {
                markAllAsRead();
            });

            // Mobile menu toggle
            mobileMenuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!sidebar.contains(event.target) && !mobileMenuToggle.contains(event.target)) {
                    sidebar.classList.remove('active');
                }
            });

            // Modal close
            modalClose.addEventListener('click', function() {
                closeModal();
            });

            // Close modal when clicking outside
            messageModal.addEventListener('click', function(e) {
                if (e.target === messageModal) {
                    closeModal();
                }
            });

            // Reply button
            replyBtn.addEventListener('click', function() {
                if (currentMessageId) {
                    const message = sampleMessages.find(m => m.id === currentMessageId);
                    showToast('Reply Initiated', `Reply window opened for ${message.name}`);
                    closeModal();
                    // In a real application, this would open a reply form/modal
                }
            });

            // Delete message button
            deleteMessageBtn.addEventListener('click', function() {
                if (currentMessageId) {
                    deleteMessage(currentMessageId);
                }
            });
        }

        // Render messages based on filters
        function renderMessages() {
            const statusFilterValue = statusFilter.value;
            const searchValue = searchInput.value.toLowerCase();
            
            // Filter messages
            let filteredMessages = sampleMessages.filter(message => {
                // Status filter
                if (statusFilterValue !== 'all' && message.status !== statusFilterValue) {
                    return false;
                }
                
                // Search filter
                if (searchValue && !(
                    message.name.toLowerCase().includes(searchValue) ||
                    message.email.toLowerCase().includes(searchValue) ||
                    message.subject.toLowerCase().includes(searchValue) ||
                    message.message.toLowerCase().includes(searchValue)
                )) {
                    return false;
                }
                
                return true;
            });
            
            // Sort by date (newest first)
            filteredMessages.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Render messages
            messagesList.innerHTML = '';
            
            if (filteredMessages.length === 0) {
                messagesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <h4>No messages found</h4>
                        <p>Try adjusting your filters or search terms</p>
                    </div>
                `;
                return;
            }
            
            filteredMessages.forEach(message => {
                const messageItem = document.createElement('div');
                messageItem.className = `message-item ${message.unread ? 'unread' : ''}`;
                messageItem.setAttribute('data-id', message.id);
                
                // Format date
                const messageDate = new Date(message.date);
                const formattedDate = messageDate.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                // Get initials for avatar
                const initials = message.name.split(' ').map(n => n[0]).join('').toUpperCase();
                
                messageItem.innerHTML = `
                    <div class="message-header">
                        <div class="message-sender">
                            <div class="sender-avatar">${initials}</div>
                            <div class="sender-info">
                                <h4>${message.name}</h4>
                                <p>${message.email}</p>
                            </div>
                        </div>
                        <div class="message-meta">
                            <div class="message-date">${formattedDate}</div>
                            <div class="message-status status-${message.status}">${getStatusText(message.status)}</div>
                        </div>
                    </div>
                    <div class="message-preview">
                        <h5>${message.subject}</h5>
                        <p>${message.message}</p>
                    </div>
                    <div class="message-actions">
                        <button class="action-btn reply" data-id="${message.id}">
                            <i class="fas fa-reply"></i> Reply
                        </button>
                        <button class="action-btn delete" data-id="${message.id}">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                        ${message.unread ? `
                        <button class="action-btn mark-read" data-id="${message.id}">
                            <i class="fas fa-envelope-open"></i> Mark as Read
                        </button>
                        ` : ''}
                    </div>
                `;
                
                messagesList.appendChild(messageItem);
            });
            
            // Add event listeners to action buttons
            addMessageActionListeners();
            
            // Add click event to message items to open modal
            const messageItems = document.querySelectorAll('.message-item');
            messageItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    // Don't trigger if clicking on action buttons
                    if (!e.target.closest('.action-btn')) {
                        const messageId = parseInt(this.getAttribute('data-id'));
                        openMessageModal(messageId);
                    }
                });
            });
        }

        // Get status text for display
        function getStatusText(status) {
            switch(status) {
                case 'new': return 'New';
                case 'read': return 'Read';
                case 'replied': return 'Replied';
                default: return status;
            }
        }

        // Add event listeners to message action buttons
        function addMessageActionListeners() {
            // Reply buttons
            const replyButtons = document.querySelectorAll('.action-btn.reply');
            replyButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const messageId = parseInt(this.getAttribute('data-id'));
                    const message = sampleMessages.find(m => m.id === messageId);
                    showToast('Reply Initiated', `Reply window opened for ${message.name}`);
                    // In a real application, this would open a reply form/modal
                });
            });
            
            // Delete buttons
            const deleteButtons = document.querySelectorAll('.action-btn.delete');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const messageId = parseInt(this.getAttribute('data-id'));
                    deleteMessage(messageId);
                });
            });
            
            // Mark as read buttons
            const markReadButtons = document.querySelectorAll('.action-btn.mark-read');
            markReadButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const messageId = parseInt(this.getAttribute('data-id'));
                    const message = sampleMessages.find(m => m.id === messageId);
                    
                    message.status = 'read';
                    message.unread = false;
                    
                    renderMessages();
                    showToast('Message Marked as Read', `Message from ${message.name} has been marked as read.`);
                });
            });
        }

        // Open message modal
        function openMessageModal(messageId) {
            const message = sampleMessages.find(m => m.id === messageId);
            if (!message) return;
            
            currentMessageId = messageId;
            
            // Format date
            const messageDate = new Date(message.date);
            const formattedDate = messageDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Get initials for avatar
            const initials = message.name.split(' ').map(n => n[0]).join('').toUpperCase();
            
            modalBody.innerHTML = `
                <div class="message-details">
                    <div class="detail-group">
                        <span class="detail-label">From</span>
                        <div class="detail-value">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div class="sender-avatar">${initials}</div>
                                <div>
                                    <div style="font-weight: 600;">${message.name}</div>
                                    <div style="font-size: 14px; color: var(--gray);">${message.email}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Phone</span>
                        <div class="detail-value">${message.phone}</div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Date</span>
                        <div class="detail-value">${formattedDate}</div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Status</span>
                        <div class="detail-value">
                            <span class="message-status status-${message.status}">${getStatusText(message.status)}</span>
                        </div>
                    </div>
                </div>
                <div class="message-full">
                    <span class="detail-label">Subject</span>
                    <div class="detail-value" style="font-weight: 600; background: transparent; padding: 0;">${message.subject}</div>
                </div>
                <div class="message-full">
                    <span class="detail-label">Message</span>
                    <div class="detail-value">${message.message}</div>
                </div>
            `;
            
            // Mark as read when opening
            if (message.unread) {
                message.status = 'read';
                message.unread = false;
                renderMessages();
            }
            
            messageModal.classList.add('active');
        }

        // Close modal
        function closeModal() {
            messageModal.classList.remove('active');
            currentMessageId = null;
        }

        // Delete message
        function deleteMessage(messageId) {
            const message = sampleMessages.find(m => m.id === messageId);
            
            // Create warning toast
            const warningToast = document.createElement('div');
            warningToast.className = 'toast warning';
            warningToast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="toast-content">
                    <h4>Confirm Deletion</h4>
                    <p>Are you sure you want to delete this message?</p>
                </div>
                <div style="display: flex; gap: 10px; margin-left: auto;">
                    <button class="action-btn" id="confirmDelete" style="background: var(--danger); color: white; border: none;">
                        Delete
                    </button>
                    <button class="action-btn" id="cancelDelete" style="background: var(--gray-light); color: var(--text-color); border: none;">
                        Cancel
                    </button>
                </div>
            `;
            
            toastContainer.appendChild(warningToast);
            
            // Show the toast
            setTimeout(() => {
                warningToast.classList.add('show');
            }, 100);
            
            // Add event listeners to confirmation buttons
            document.getElementById('confirmDelete').addEventListener('click', function() {
                // Remove from sample data
                const index = sampleMessages.findIndex(m => m.id === messageId);
                if (index !== -1) {
                    sampleMessages.splice(index, 1);
                    renderMessages();
                    closeModal();
                    hideToast(warningToast);
                    showToast('Message Deleted', `Message from ${message.name} has been deleted.`);
                }
            });
            
            document.getElementById('cancelDelete').addEventListener('click', function() {
                hideToast(warningToast);
            });
            
            // Auto remove after 10 seconds
            setTimeout(() => {
                if (warningToast.parentNode) {
                    hideToast(warningToast);
                }
            }, 10000);
        }

        // Mark all messages as read
        function markAllAsRead() {
            sampleMessages.forEach(message => {
                message.status = 'read';
                message.unread = false;
            });
            
            renderMessages();
            showToast('All Messages Read', 'All messages have been marked as read.');
        }

        // Show toast notification
        function showToast(title, message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-check"></i>
                </div>
                <div class="toast-content">
                    <h4>${title}</h4>
                    <p>${message}</p>
                </div>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Show the toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                hideToast(toast);
            }, 5000);
            
            // Close button functionality
            const closeBtn = toast.querySelector('.toast-close');
            closeBtn.addEventListener('click', () => {
                hideToast(toast);
            });
        }

        // Hide toast notification
        function hideToast(toast) {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 400);
        }
    </script>
</body>
</html>