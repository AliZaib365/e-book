<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shop | E-Book Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;600;500;400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #a259ff;
      --primary-dark: #7c30b6;
      --text-color: #231942;
      --light-bg: #ffffff;
      --white: #fff;
      --transition: all 0.3s ease;
      --success-color: #4CAF50;
      --cart-bg: #f8f9fa;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: var(--white);
      font-family: 'Montserrat', Arial, sans-serif;
      color: var(--text-color);
      margin: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1480px;
      margin: 38px auto 80px auto;
      padding: 0 28px;
    }
    
    .breadcrumbs {
      font-size: 1rem;
      margin-bottom: 36px;
      color: var(--text-color);
      font-weight: 500;
    }
    
    .breadcrumbs a {
      color: var(--primary-color);
      text-decoration: underline;
      transition: var(--transition);
    }
    
    .breadcrumbs a:hover {
      color: var(--primary-dark);
    }
    
    .shop-header-row {
      display: flex;
      justify-content: space-between;
      align-items: end;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }
    
    .shop-title {
      font-size: 2.4rem;
      font-weight: 800;
      margin-bottom: 7px;
      color: var(--text-color);
      letter-spacing: 0.2px;
    }
    
    .shop-meta {
      margin: 0 0 22px 0;
      font-size: 1.13rem;
      color: var(--text-color);
      font-weight: 500;
    }
    
    .shop-sort {
      font-size: 1rem;
      padding: 10px 15px;
      border-radius: 8px;
      border: 1.5px solid var(--primary-color);
      color: var(--primary-dark);
      font-weight: 600;
      background: #faf7ff;
      margin-bottom: 15px;
      outline: none;
      transition: var(--transition);
      cursor: pointer;
    }
    
    .shop-sort:focus {
      border-color: var(--primary-dark);
      box-shadow: 0 0 0 3px rgba(162, 89, 255, 0.2);
    }
    
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 38px 32px;
      margin-bottom: 38px;
    }
    
    .product-card {
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 0 28px 0;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(30px);
      border: 1px solid #f0f0f0;
    }
    
    .product-card.animate {
      opacity: 1;
      transform: translateY(0);
    }
    
    .product-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(162, 89, 255, 0.05) 0%, rgba(124, 48, 182, 0.05) 100%);
      opacity: 0;
      transition: var(--transition);
      z-index: 0;
    }
    
    .product-card:hover {
      box-shadow: 0 12px 36px rgba(162, 89, 255, 0.17);
      transform: translateY(-10px) scale(1.02);
    }
    
    .product-card:hover::before {
      opacity: 1;
    }
    
    .product-image-container {
      width: 100%;
      height: 220px;
      overflow: hidden;
      border-radius: 12px 12px 0 0;
      position: relative;
    }
    
    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }
    
    .product-card:hover .product-image {
      transform: scale(1.05);
    }
    
    .product-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
      color: var(--white);
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 2;
    }
    
    .product-title {
      font-weight: 700;
      font-size: 1.15rem;
      color: var(--text-color);
      margin: 14px 0 2px 0;
      text-align: center;
      min-height: 52px;
      padding: 0 15px;
      letter-spacing: 0.01em;
      position: relative;
      z-index: 1;
    }
    
    .product-price {
      font-size: 1.15rem;
      color: var(--primary-color);
      font-weight: 800;
      margin-bottom: 13px;
      margin-top: 0;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    
    .add-to-cart-btn {
      background: linear-gradient(90deg, var(--primary-color), var(--primary-dark) 90%);
      color: var(--white);
      font-weight: 700;
      border: none;
      border-radius: 8px;
      font-size: 1.03rem;
      padding: 13px 40px;
      margin-top: 7px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 15px rgba(162, 89, 255, 0.2);
      letter-spacing: 0.03em;
      position: relative;
      z-index: 1;
      overflow: hidden;
    }
    
    .add-to-cart-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .add-to-cart-btn:hover {
      background: linear-gradient(90deg, var(--primary-dark), var(--primary-color) 90%);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(162, 89, 255, 0.3);
    }
    
    .add-to-cart-btn:hover::before {
      left: 100%;
    }
    
    .add-to-cart-btn.added {
      background: linear-gradient(90deg, var(--success-color), #45a049 90%);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .pagination-btn {
      background: #faf7ff;
      border: 1.5px solid var(--primary-color);
      color: var(--primary-color);
      font-weight: 700;
      border-radius: 8px;
      font-size: 1.08rem;
      padding: 10px 18px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .pagination-btn.active, .pagination-btn:focus {
      background: var(--primary-color);
      color: var(--white);
      border-color: var(--primary-dark);
    }
    
    .pagination-btn:hover:not(.active) {
      background: var(--primary-dark);
      color: var(--white);
      border-color: var(--primary-color);
      transform: translateY(-2px);
    }
    
    .filters-section {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
      padding: 20px;
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      border: 1px solid #f0f0f0;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .filter-label {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--text-color);
    }
    
    .filter-select {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #ddd;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.9rem;
      background: var(--white);
      cursor: pointer;
    }
    
    .price-filter {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .price-input {
      width: 80px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ddd;
      font-family: 'Montserrat', sans-serif;
    }
    
    .search-box {
      position: relative;
      margin-bottom: 30px;
    }
    
    .search-input {
      width: 100%;
      padding: 15px 20px 15px 50px;
      border-radius: 12px;
      border: 1.5px solid var(--primary-color);
      font-size: 1rem;
      font-family: 'Montserrat', sans-serif;
      background: var(--white);
      transition: var(--transition);
    }
    
    .search-input:focus {
      box-shadow: 0 0 0 3px rgba(162, 89, 255, 0.2);
      outline: none;
    }
    
    .search-icon {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary-color);
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 30px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(162, 89, 255, 0.2);
      border-left: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      display: none;
    }
    
    .empty-state i {
      font-size: 4rem;
      color: var(--primary-color);
      margin-bottom: 20px;
    }
    
    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    
    .empty-state p {
      color: #666;
      margin-bottom: 20px;
    }
    
    .reset-filters {
      background: transparent;
      border: 1.5px solid var(--primary-color);
      color: var(--primary-color);
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .reset-filters:hover {
      background: var(--primary-color);
      color: var(--white);
    }
    
    /* Cart Styles */
    .cart-container {
      position: fixed;
      top: 0;
      right: -400px;
      width: 380px;
      height: 100vh;
      background: var(--cart-bg);
      box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      border-left: 1px solid #e0e0e0;
    }
    
    .cart-container.open {
      right: 0;
    }
    
    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
      background: var(--white);
    }
    
    .cart-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-color);
    }
    
    .close-cart {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-color);
      transition: var(--transition);
    }
    
    .close-cart:hover {
      color: var(--primary-color);
    }
    
    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    
    .cart-item {
      display: flex;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .cart-item-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      overflow: hidden;
      margin-right: 15px;
    }
    
    .cart-item-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .cart-item-details {
      flex: 1;
    }
    
    .cart-item-title {
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 0.95rem;
    }
    
    .cart-item-price {
      color: var(--primary-color);
      font-weight: 700;
      margin-bottom: 10px;
    }
    
    .cart-item-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .quantity-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 1px solid #ddd;
      background: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .quantity-btn:hover {
      background: var(--primary-color);
      color: var(--white);
    }
    
    .cart-item-quantity {
      font-weight: 600;
      min-width: 30px;
      text-align: center;
    }
    
    .remove-item {
      color: #ff5252;
      background: none;
      border: none;
      cursor: pointer;
      margin-left: auto;
      transition: var(--transition);
    }
    
    .remove-item:hover {
      color: #d32f2f;
    }
    
    .cart-footer {
      padding: 20px;
      border-top: 1px solid #e0e0e0;
      background: var(--white);
    }
    
    .cart-total {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    
    .checkout-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
      color: var(--white);
      border: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 15px rgba(162, 89, 255, 0.3);
    }
    
    .checkout-btn:hover {
      background: linear-gradient(90deg, var(--primary-dark), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(162, 89, 255, 0.4);
    }
    
    .empty-cart {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }
    
    .empty-cart i {
      font-size: 3rem;
      margin-bottom: 15px;
      color: #ddd;
    }
    
    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: var(--primary-color);
      color: var(--white);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
    }
    
    .cart-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--success-color);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1001;
      transform: translateY(100px);
      opacity: 0;
      transition: var(--transition);
    }
    
    .cart-notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* Navbar Styles */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: var(--white);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-color);
    }
    
    .logo-dot {
      color: var(--primary-color);
    }
    
    .navbar-menu {
      display: flex;
      gap: 30px;
    }
    
    .navbar-menu a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: 500;
      transition: var(--transition);
      position: relative;
    }
    
    .navbar-menu a:hover, .navbar-menu a.active {
      color: var(--primary-color);
    }
    
    .navbar-menu a.active::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--primary-color);
    }
    
    .navbar-actions {
      display: flex;
      gap: 20px;
      position: relative;
    }
    
    .navbar-actions a {
      color: var(--text-color);
      font-size: 1.2rem;
      transition: var(--transition);
      position: relative;
    }
    
    .navbar-actions a:hover {
      color: var(--primary-color);
    }
    
    .menu-icon {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    .sidebar {
      position: fixed;
      top: 0;
      right: -300px;
      width: 300px;
      height: 100vh;
      background: var(--white);
      box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
      z-index: 1000;
      padding: 60px 20px 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .sidebar.open {
      right: 0;
    }
    
    .sidebar a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: 500;
      padding: 10px 15px;
      border-radius: 8px;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .sidebar a:hover {
      background: var(--light-bg);
      color: var(--primary-color);
    }
    
    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-color);
    }
    
    /* Animation for page load */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .container {
      animation: fadeInUp 0.6s ease-out;
    }
    
    /* Responsive styles */
    @media (max-width: 1200px) {
      .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 30px;
      }
      
      .cart-container {
        width: 350px;
      }
    }
    
    @media (max-width: 900px) {
      .container {
        padding: 0 20px;
      }
      
      .shop-header-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .filters-section {
        flex-direction: column;
      }
      
      .filter-group {
        width: 100%;
      }
      
      .navbar-menu {
        display: none;
      }
      
      .menu-icon {
        display: block;
      }
      
      .cart-container {
        width: 100%;
        right: -100%;
      }
    }
    
    @media (max-width: 600px) {
      .shop-title {
        font-size: 1.8rem;
      }
      
      .shop-meta {
        font-size: 1rem;
      }
      
      .product-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .product-image-container {
        height: 200px;
      }
      
      .product-title {
        font-size: 1.1rem;
        padding: 0 10px;
      }
      
      .pagination {
        flex-wrap: wrap;
      }
      
      .search-input {
        padding: 12px 15px 12px 45px;
      }
      
      .navbar {
        padding: 15px 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Enhanced Navbar -->
  <nav class="navbar">
    <span class="logo"><i class="fas fa-book"></i>E-Book<span class="logo-dot">.</span></span>
    <div class="navbar-menu">
      <a href="index.html" class="active">Home</a>
      <a href="store.html">Store</a>
      <a href="#features">Features</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </div>
    <div class="navbar-actions">
      <a href="#search"><i class="fas fa-search"></i></a>
      <a href="#" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
      </a>
      <a href="#account"><i class="fas fa-user"></i></a>
    </div>
    <span class="menu-icon" onclick="openSidebar()">&#9776;</span>
  </nav>
  
  <!-- Sidebar for mobile -->
  <div class="sidebar" id="sidebar">
    <button class="close-btn" onclick="closeSidebar()">&times;</button>
    <a href="index.html" onclick="closeSidebar()"><i class="fas fa-home"></i>Home</a>
    <a href="store.html" onclick="closeSidebar()"><i class="fas fa-store"></i>Store</a>
    <a href="#features" onclick="closeSidebar()"><i class="fas fa-star"></i>Features</a>
    <a href="#about" onclick="closeSidebar()"><i class="fas fa-info-circle"></i>About</a>
    <a href="#contact" onclick="closeSidebar()"><i class="fas fa-envelope"></i>Contact</a>
    <a href="#" id="sidebarCartIcon" onclick="closeSidebar(); openCart()"><i class="fas fa-shopping-cart"></i>Cart</a>
  </div>
  
  <!-- Shopping Cart -->
  <div class="cart-container" id="cartContainer">
    <div class="cart-header">
      <h2 class="cart-title">Your Cart</h2>
      <button class="close-cart" id="closeCart">&times;</button>
    </div>
    <div class="cart-items" id="cartItems">
      <!-- Cart items will be dynamically added here -->
    </div>
    <div class="cart-footer">
      <div class="cart-total">
        <span>Total:</span>
        <span id="cartTotal">$0.00</span>
      </div>
      <button class="checkout-btn" id="checkoutBtn">Proceed to Checkout</button>
    </div>
  </div>
  
  <!-- Cart Notification -->
  <div class="cart-notification" id="cartNotification">
    <i class="fas fa-check-circle"></i>
    <span>Item added to cart!</span>
  </div>
  
  <!-- Main Content -->
  <div class="container">
    <div class="breadcrumbs">
      <a href="#"><i class="fas fa-home"></i> Home</a> / Shop
    </div>
    
    <div class="shop-header-row">
      <div>
        <h1 class="shop-title">E-Book Store</h1>
        <div class="shop-meta" id="results-meta"></div>
      </div>
      <div>
        <select class="shop-sort" id="sortSelect">
          <option value="popularity">Sort by popularity</option>
          <option value="price-low">Sort by price: low to high</option>
          <option value="price-high">Sort by price: high to low</option>
          <option value="az">Sort A-Z</option>
          <option value="za">Sort Z-A</option>
        </select>
      </div>
    </div>
    
    <div class="search-box">
      <i class="fas fa-search search-icon"></i>
      <input type="text" class="search-input" id="searchInput" placeholder="Search e-books...">
    </div>
    
    <div class="filters-section">
      <div class="filter-group">
        <label class="filter-label">Category</label>
        <select class="filter-select" id="categoryFilter">
          <option value="all">All Categories</option>
          <option value="marketing">Marketing</option>
          <option value="publishing">Publishing</option>
          <option value="design">Design</option>
          <option value="seo">SEO</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Price Range</label>
        <div class="price-filter">
          <input type="number" class="price-input" id="minPrice" placeholder="Min" min="0">
          <span>-</span>
          <input type="number" class="price-input" id="maxPrice" placeholder="Max" min="0">
        </div>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Rating</label>
        <select class="filter-select" id="ratingFilter">
          <option value="all">All Ratings</option>
          <option value="4">4+ Stars</option>
          <option value="3">3+ Stars</option>
        </select>
      </div>
      
      <button class="reset-filters" id="resetFilters">Reset Filters</button>
    </div>
    
    <div class="loading-spinner" id="loadingSpinner">
      <div class="spinner"></div>
      <p>Loading products...</p>
    </div>
    
    <div class="empty-state" id="emptyState">
      <i class="fas fa-book-open"></i>
      <h3>No products found</h3>
      <p>Try adjusting your search or filters</p>
      <button class="reset-filters" id="resetEmptyState">Reset Filters</button>
    </div>
    
    <div class="product-grid" id="productGrid"></div>
    
    <div class="pagination" id="pagination"></div>
  </div>

  <script>
    // Enhanced e-book products with more details
    const allProducts = [
      {
        id: 1,
        title: "The Ultimate E-Book Launch Blueprint",
        price: 39.00,
        image: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.8,
        badge: "Bestseller"
      },
      {
        id: 2,
        title: "Content Marketing for E-Books",
        price: 27.00,
        image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.5,
        badge: "Popular"
      },
      {
        id: 3,
        title: "Passive Income with Digital Publishing",
        price: 47.00,
        image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.9,
        badge: "New"
      },
      {
        id: 4,
        title: "Email List Growth for Authors",
        price: 19.00,
        image: "https://images.unsplash.com/photo-1510414696678-2415ad8474aa?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.3,
        badge: "Sale"
      },
      {
        id: 5,
        title: "E-Book Funnel Templates & Swipe Files",
        price: 33.00,
        image: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.7
      },
      {
        id: 6,
        title: "Self-Publishing Success Guide",
        price: 59.00,
        image: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.6,
        badge: "Premium"
      },
      {
        id: 7,
        title: "Social Media Growth for E-Books",
        price: 25.00,
        image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.4
      },
      {
        id: 8,
        title: "KDP Profits Masterclass",
        price: 44.00,
        image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.9,
        badge: "Hot"
      },
      {
        id: 9,
        title: "Evergreen Email Marketing for Authors",
        price: 29.00,
        image: "https://images.unsplash.com/photo-1510414696678-2415ad8474aa?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.5
      },
      {
        id: 10,
        title: "AI Tools for E-Book Creation",
        price: 39.00,
        image: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.7,
        badge: "Trending"
      },
      {
        id: 11,
        title: "Book Cover Design Workshop",
        price: 37.00,
        image: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?fit=crop&w=480&q=80",
        category: "design",
        rating: 4.8
      },
      {
        id: 12,
        title: "Digital Products: Upsell Secrets",
        price: 35.00,
        image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.6
      },
      {
        id: 13,
        title: "E-Book SEO & Amazon Ranking",
        price: 22.00,
        image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?fit=crop&w=480&q=80",
        category: "seo",
        rating: 4.4,
        badge: "Sale"
      },
      {
        id: 14,
        title: "E-Book Store Starter Kit",
        price: 49.00,
        image: "https://images.unsplash.com/photo-1510414696678-2415ad8474aa?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.7
      },
      {
        id: 15,
        title: "Instagram Growth for Authors",
        price: 26.00,
        image: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.3
      },
      {
        id: 16,
        title: "E-Book Launch Checklist",
        price: 17.00,
        image: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 4.2,
        badge: "Freebie"
      },
      {
        id: 17,
        title: "Sales Page Copywriting for E-Books",
        price: 41.00,
        image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?fit=crop&w=480&q=80",
        category: "marketing",
        rating: 4.8
      },
      {
        id: 18,
        title: "Ultimate Bundle: Author's Power Kit",
        price: 97.00,
        image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?fit=crop&w=480&q=80",
        category: "publishing",
        rating: 5.0,
        badge: "Bundle"
      }
    ];

    // Cart state
    let cart = [];
    
    // State management
    const state = {
      currentPage: 1,
      products: [...allProducts],
      sortBy: "popularity",
      searchQuery: "",
      categoryFilter: "all",
      minPrice: null,
      maxPrice: null,
      ratingFilter: "all",
      perPage: 6
    };

    // DOM elements
    const elements = {
      productGrid: document.getElementById('productGrid'),
      pagination: document.getElementById('pagination'),
      resultsMeta: document.getElementById('results-meta'),
      sortSelect: document.getElementById('sortSelect'),
      searchInput: document.getElementById('searchInput'),
      categoryFilter: document.getElementById('categoryFilter'),
      minPrice: document.getElementById('minPrice'),
      maxPrice: document.getElementById('maxPrice'),
      ratingFilter: document.getElementById('ratingFilter'),
      resetFilters: document.getElementById('resetFilters'),
      loadingSpinner: document.getElementById('loadingSpinner'),
      emptyState: document.getElementById('emptyState'),
      resetEmptyState: document.getElementById('resetEmptyState'),
      cartIcon: document.getElementById('cartIcon'),
      cartCount: document.getElementById('cartCount'),
      cartContainer: document.getElementById('cartContainer'),
      closeCart: document.getElementById('closeCart'),
      cartItems: document.getElementById('cartItems'),
      cartTotal: document.getElementById('cartTotal'),
      checkoutBtn: document.getElementById('checkoutBtn'),
      cartNotification: document.getElementById('cartNotification')
    };

    // Initialize the page
    function init() {
      renderProducts();
      renderPagination();
      setupEventListeners();
      setupScrollAnimations();
      loadCartFromStorage();
      updateCartUI();
    }

    // Set up event listeners
    function setupEventListeners() {
      elements.sortSelect.addEventListener('change', function() {
        state.sortBy = this.value;
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.searchInput.addEventListener('input', function() {
        state.searchQuery = this.value.toLowerCase();
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.categoryFilter.addEventListener('change', function() {
        state.categoryFilter = this.value;
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.minPrice.addEventListener('input', function() {
        state.minPrice = this.value ? parseFloat(this.value) : null;
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.maxPrice.addEventListener('input', function() {
        state.maxPrice = this.value ? parseFloat(this.value) : null;
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.ratingFilter.addEventListener('change', function() {
        state.ratingFilter = this.value;
        state.currentPage = 1;
        filterAndSortProducts();
      });

      elements.resetFilters.addEventListener('click', resetFilters);
      elements.resetEmptyState.addEventListener('click', resetFilters);
      
      // Cart event listeners
      elements.cartIcon.addEventListener('click', function(e) {
        e.preventDefault();
        openCart();
      });
      
      elements.closeCart.addEventListener('click', closeCart);
      elements.checkoutBtn.addEventListener('click', checkout);
    }

    // Cart functionality
    function openCart() {
      elements.cartContainer.classList.add('open');
    }
    
    function closeCart() {
      elements.cartContainer.classList.remove('open');
    }
    
    function addToCart(productId) {
      const product = allProducts.find(p => p.id === parseInt(productId));
      if (!product) return;
      
      // Check if product is already in cart
      const existingItem = cart.find(item => item.id === product.id);
      
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({
          ...product,
          quantity: 1
        });
      }
      
      // Save to localStorage
      saveCartToStorage();
      
      // Update UI
      updateCartUI();
      
      // Show notification
      showCartNotification(product.title);
      
      // Visual feedback on button
      const button = document.querySelector(`.add-to-cart-btn[data-id="${productId}"]`);
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Added!';
      button.classList.add('added');
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.classList.remove('added');
      }, 2000);
    }
    
    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      saveCartToStorage();
      updateCartUI();
    }
    
    function updateQuantity(productId, change) {
      const item = cart.find(item => item.id === productId);
      if (!item) return;
      
      item.quantity += change;
      
      if (item.quantity <= 0) {
        removeFromCart(productId);
      } else {
        saveCartToStorage();
        updateCartUI();
      }
    }
    
    function updateCartUI() {
      // Update cart count
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      elements.cartCount.textContent = totalItems;
      
      // Update cart items
      elements.cartItems.innerHTML = '';
      
      if (cart.length === 0) {
        elements.cartItems.innerHTML = `
          <div class="empty-cart">
            <i class="fas fa-shopping-cart"></i>
            <p>Your cart is empty</p>
          </div>
        `;
        elements.cartTotal.textContent = '$0.00';
        return;
      }
      
      let total = 0;
      
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <div class="cart-item-image">
            <img src="${item.image}" alt="${item.title}">
          </div>
          <div class="cart-item-details">
            <div class="cart-item-title">${item.title}</div>
            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
            <div class="cart-item-actions">
              <button class="quantity-btn minus" data-id="${item.id}">-</button>
              <span class="cart-item-quantity">${item.quantity}</span>
              <button class="quantity-btn plus" data-id="${item.id}">+</button>
              <button class="remove-item" data-id="${item.id}">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        `;
        
        elements.cartItems.appendChild(cartItem);
        
        // Add event listeners to cart item buttons
        cartItem.querySelector('.minus').addEventListener('click', function() {
          updateQuantity(item.id, -1);
        });
        
        cartItem.querySelector('.plus').addEventListener('click', function() {
          updateQuantity(item.id, 1);
        });
        
        cartItem.querySelector('.remove-item').addEventListener('click', function() {
          removeFromCart(item.id);
        });
      });
      
      // Update total
      elements.cartTotal.textContent = `$${total.toFixed(2)}`;
    }
    
    function showCartNotification(productTitle) {
      elements.cartNotification.querySelector('span').textContent = `${productTitle} added to cart!`;
      elements.cartNotification.classList.add('show');
      
      setTimeout(() => {
        elements.cartNotification.classList.remove('show');
      }, 3000);
    }
    
    function checkout() {
      if (cart.length === 0) {
        alert('Your cart is empty!');
        return;
      }
      
      alert('Thank you for your purchase! This is a demo store.');
      cart = [];
      saveCartToStorage();
      updateCartUI();
      closeCart();
    }
    
    function saveCartToStorage() {
      localStorage.setItem('ebookStoreCart', JSON.stringify(cart));
    }
    
    function loadCartFromStorage() {
      const savedCart = localStorage.getItem('ebookStoreCart');
      if (savedCart) {
        cart = JSON.parse(savedCart);
      }
    }

    // Reset all filters
    function resetFilters() {
      state.searchQuery = "";
      state.categoryFilter = "all";
      state.minPrice = null;
      state.maxPrice = null;
      state.ratingFilter = "all";
      state.currentPage = 1;
      
      elements.searchInput.value = "";
      elements.categoryFilter.value = "all";
      elements.minPrice.value = "";
      elements.maxPrice.value = "";
      elements.ratingFilter.value = "all";
      
      filterAndSortProducts();
    }

    // Filter and sort products based on current state
    function filterAndSortProducts() {
      // Show loading state
      elements.loadingSpinner.style.display = 'block';
      elements.emptyState.style.display = 'none';
      
      // Simulate API call delay
      setTimeout(() => {
        let filteredProducts = [...allProducts];
        
        // Apply search filter
        if (state.searchQuery) {
          filteredProducts = filteredProducts.filter(product => 
            product.title.toLowerCase().includes(state.searchQuery)
          );
        }
        
        // Apply category filter
        if (state.categoryFilter !== "all") {
          filteredProducts = filteredProducts.filter(product => 
            product.category === state.categoryFilter
          );
        }
        
        // Apply price filter
        if (state.minPrice !== null) {
          filteredProducts = filteredProducts.filter(product => 
            product.price >= state.minPrice
          );
        }
        
        if (state.maxPrice !== null) {
          filteredProducts = filteredProducts.filter(product => 
            product.price <= state.maxPrice
          );
        }
        
        // Apply rating filter
        if (state.ratingFilter !== "all") {
          const minRating = parseFloat(state.ratingFilter);
          filteredProducts = filteredProducts.filter(product => 
            product.rating >= minRating
          );
        }
        
        // Apply sorting
        sortProducts(filteredProducts);
        
        state.products = filteredProducts;
        state.currentPage = 1;
        
        renderProducts();
        renderPagination();
        
        // Hide loading state
        elements.loadingSpinner.style.display = 'none';
        
        // Show empty state if no products
        if (state.products.length === 0) {
          elements.emptyState.style.display = 'block';
        }
      }, 500);
    }

    // Sort products based on current sort option
    function sortProducts(products) {
      switch(state.sortBy) {
        case "price-low":
          products.sort((a, b) => a.price - b.price);
          break;
        case "price-high":
          products.sort((a, b) => b.price - a.price);
          break;
        case "az":
          products.sort((a, b) => a.title.localeCompare(b.title));
          break;
        case "za":
          products.sort((a, b) => b.title.localeCompare(a.title));
          break;
        case "popularity":
        default:
          // Keep original order (simulating popularity)
          break;
      }
    }

    // Render products to the grid
    function renderProducts() {
      const start = (state.currentPage - 1) * state.perPage;
      const end = start + state.perPage;
      const paginated = state.products.slice(start, end);
      
      elements.productGrid.innerHTML = '';
      
      if (paginated.length === 0) {
        elements.emptyState.style.display = 'block';
        return;
      }
      
      paginated.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.style.transitionDelay = `${index * 0.05}s`;
        
        let badgeHtml = '';
        if (product.badge) {
          badgeHtml = `<div class="product-badge">${product.badge}</div>`;
        }
        
        productCard.innerHTML = `
          <div class="product-image-container">
            <img class="product-image" src="${product.image}" alt="${product.title}" loading="lazy">
            ${badgeHtml}
          </div>
          <div class="product-title">${product.title}</div>
          <div class="product-price">$${product.price.toFixed(2)}</div>
          <button class="add-to-cart-btn" data-id="${product.id}">
            <i class="fas fa-shopping-cart"></i> Add to cart
          </button>
        `;
        
        elements.productGrid.appendChild(productCard);
        
        // Add to cart functionality
        const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
        addToCartBtn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          addToCart(productId);
        });
      });
      
      // Update results meta
      elements.resultsMeta.textContent = 
        `Showing ${start + 1}–${Math.min(end, state.products.length)} of ${state.products.length} results`;
      
      // Trigger animations after a short delay
      setTimeout(() => {
        document.querySelectorAll('.product-card').forEach(card => {
          card.classList.add('animate');
        });
      }, 100);
    }

    // Render pagination controls
    function renderPagination() {
      const totalPages = Math.ceil(state.products.length / state.perPage);
      elements.pagination.innerHTML = '';
      
      if (totalPages <= 1) return;
      
      // Previous button
      if (state.currentPage > 1) {
        elements.pagination.innerHTML += 
          `<button class="pagination-btn" data-page="${state.currentPage - 1}">
            <i class="fas fa-chevron-left"></i> Prev
          </button>`;
      }
      
      // Page numbers
      for (let i = 1; i <= totalPages; i++) {
        elements.pagination.innerHTML += 
          `<button class="pagination-btn${i === state.currentPage ? ' active' : ''}" data-page="${i}">${i}</button>`;
      }
      
      // Next button
      if (state.currentPage < totalPages) {
        elements.pagination.innerHTML += 
          `<button class="pagination-btn" data-page="${state.currentPage + 1}">
            Next <i class="fas fa-chevron-right"></i>
          </button>`;
      }
      
      // Add event listeners to pagination buttons
      document.querySelectorAll('.pagination-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          state.currentPage = parseInt(this.getAttribute('data-page'));
          renderProducts();
          renderPagination();
          window.scrollTo({top: 0, behavior: 'smooth'});
        });
      });
    }

    // Set up scroll animations
    function setupScrollAnimations() {
      const observerOptions = {
        root: null,
        rootMargin: '0px 0px -50px 0px',
        threshold: 0.1
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
          }
        });
      }, observerOptions);
      
      // Observe product cards for animation
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.product-card').forEach(card => {
          observer.observe(card);
        });
      });
    }

    // Sidebar functions
    function openSidebar() {
      document.getElementById('sidebar').classList.add('open');
    }
    
    function closeSidebar() {
      document.getElementById('sidebar').classList.remove('open');
    }

    // Initialize the application
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>